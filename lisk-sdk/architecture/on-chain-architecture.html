<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>On-chain architecture - Lisk  SDK  Docs</title>
    <link rel="canonical" href="https://lisk.io/documentation/lisk-sdk/architecture/on-chain-architecture.html">
    <meta name="description" content="Explains what are modules and how to create and use them in a blockchain application.">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-extra.css">
      <link rel="stylesheet" href="../../_/css/vendor/docsearch.min.css">
      <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<script data-cookieconsent="ignore" type="text/javascript" id="GTM">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":
          new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!="dataLayer"?"&amp;l="+l:"";j.async=true;
  j.crossOrigin="anonymous";j.src=
          "https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,"script","dataLayer","GTM-NKNKGHL");</script>

<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<header class="header">
  <nav class="navbar">
      <div class="navbar-content">
        <div class="navbar-brand">
          <a href="https://lisk.io" title="Lisk.io" class="lisk-logo"></a>
            <span  class="nav-brand__name-area">
              <strong class="nav-brand__name-area__title">SDK</strong>
                        </span>
          <div class="top-versions page-versions">
  <button class="version-menu-toggle top-version-menu-toggle" title="Show other versions of page">5.0.3 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="on-chain-architecture.html">5.0.3 (latest)</a>
    <a class="version is-missing" href="../v4/index.html">4.0.0</a>
    <a class="version is-missing" href="../v3/index.html">3.0.2</a>
    <a class="version is-missing" href="../v2/index.html">2.3.8</a>
  </div>
</div>
          <button class="navbar-burger" data-target="topbar-nav">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Documentations</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-sdk/">Lisk SDK</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-service/">Lisk Service</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/">Lisk Core</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Resources</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href=""><strong>Lisk Service API</strong></a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-service/references/api.html">Mainnet</a>
                <a class="navbar-item" href=""><strong>Lisk Core HTTP API</strong></a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/v3/reference/api.html">Betanet</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/reference/api.html">Testnet</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/reference/api-mainnet.html">Mainnet</a>
                <hr class="navbar-divider">
                <a class="navbar-item" href=""><strong>Lisk Network Explorer</strong></a>
                <a class="navbar-item" target="_blank" href="https://testnet-explorer.lisk.io/">Testnet<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://explorer.lisk.io/">Mainnet<i class="icofont-external-link"></i></a>
              </div>
            </div>
          </div>
            <div class="navbar-menu search-box hide-for-print">
              <input id="search-input" type="text" placeholder="Search">
            </div>
        </div>
        <div class="navbar-item navbar-right">
<!--
          <a href="https://lisk.chat" title="Lisk Chat" target="_blank" class="footer__icon icon-discord-2x"></a>
-->
          <a href="https://github.com/LiskHQ" title="Lisk GitHub" target="_blank" class="footer__icon icon-github-2x"></a>
          <span class="control">
            <a class="button is-primary" target="_blank" title="Lisk Dev Forum" href="https://dev.lisk.io/">Get help</a>
          </span>
        </div>
      </div>
  </nav>
</header>
<div class="body-container">
  <div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../index.html">What is the Lisk SDK?</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../quickstart.html">Quickstart</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="index.html">Architectural overview</a>
  </li>
  <li class="nav-item is-current-page single-page" data-depth="2">
    <a class="nav-link" href="on-chain-architecture.html">On-chain architecture</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="off-chain-architecture.html">Off-chain architecture</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="communication-architecture.html">Communication Architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Development guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/setup.html">Starting a blockchain application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/configuration.html">Configuring a blockchain application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/module.html">Creating a custom module</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/asset.html">Creating a custom asset</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/plugin.html">Creating a custom plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/frontend.html">Communicating with a frontend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/non-forging-node-protection.html">Protecting a non-forging node</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/forging-node-protection.html">Protecting a forging node</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/forging.html">Enabling forging</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../tutorials/index.html">Tutorials overview</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../tutorials/hello-world.html">Hello World</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../references/schemas.html">Schemas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Commander</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-commander/index.html">What is Lisk Commander?</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-commander/commands.html">Commands</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-commander/sensitive-inputs.html">Sensitive inputs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Elements</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/index.html">What is Lisk Elements?</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/api-client.html">API client</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/bft.html">BFT</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/chain.html">Chain</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/client.html">Client</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/codec.html">Codec</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/cryptography.html">Cryptography</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/db.html">DB</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/genesis.html">Genesis</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/p2p.html">P2P</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/passphrase.html">Passphrase</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/transaction-pool.html">Transaction pool</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/tree.html">Tree</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/utils.html">Utils</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/validator.html">Validator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Framework</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-framework/index.html">Framework interfaces</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../rpc-endpoints.html">RPC endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Default modules</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../token-module.html">The token module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../sequence-module.html">The sequence module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../keys-module.html">The keys module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../dpos-module.html">The DPoS module</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Default plugins</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/http-api-plugin.html">HTTP API plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/forger-plugin.html">Forger plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/report-misbehavior-plugin.html">Report misbehavior plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/monitor-plugin.html">Monitor plugin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk protocol</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/index.html">What is the Lisk protocol?</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/accounts.html">Accounts</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/blocks.html">Blocks</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/consensus-algorithm.html">Consensus algorithm</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/network.html">Network</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">5.0.3 (latest)</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Lisk Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">2.1.6 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v3/index.html">3.0.0-beta.4</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v3-beta.1/index.html">3.0.0-beta.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Lisk SDK</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">5.0.3 (latest)</a>
        </li>
        <li class="version">
          <a href="../v4/index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="../v3/index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="../v2/index.html">2.3.8</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk Service</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.2.0 (latest)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" title="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk SDK</a></li>
    <li>Introduction</li>
    <li><a href="on-chain-architecture.html">On-chain architecture</a></li>
  </ul>
</nav>
  <div class="page-versions toolbar-versions">
  <button class="version-menu-toggle" title="Show other versions of page">5.0.3 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="on-chain-architecture.html">5.0.3 (latest)</a>
    <a class="version is-missing" href="../v4/index.html">4.0.0</a>
    <a class="version is-missing" href="../v3/index.html">3.0.2</a>
    <a class="version is-missing" href="../v2/index.html">2.3.8</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-sdk/modules/ROOT/pages/architecture/on-chain-architecture.adoc"><i class="icofont-ui-edit"></i>Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">On-chain architecture</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The on-chain architecture of the <code>Application</code> consists of two things.
One is the <code>Node</code> and others are the <code>Modules</code>.</p>
</div>
<div class="paragraph">
<p>The <code>Node</code> is the main object in charge of acting on the blockchain including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>forging blocks</p>
</li>
<li>
<p>synchronizing with the network</p>
</li>
<li>
<p>processing blocks from the network</p>
</li>
<li>
<p>&#8230;&#8203; and broadcasting blocks and transactions to the network.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Node</code> is a private abstraction layer of the above mentioned activities, which is the reason it&#8217;s not visible to the SDK user.
Only the <code>Module</code> interface is exposed to the user, for defining any on-chain logic.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-a-module"><a class="anchor" href="#what-is-a-module"></a>What is a module?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modules hold all logic that is changing the state of the blockchain; or in other words, all logic that makes changes on the chain.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All of the logic implemented using a custom module / asset must be “deterministic” and executable within the block time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Modules define an account schema to store the module related data in the account.
The definition of this schema is totally flexible and it is possible to define very complex data structures as well, if needed.</p>
</div>
<div class="paragraph">
<p>The second part of modules enables to control the behaviour of the module.
The <code>BaseModule</code>, which every module extends from, offers various lifecycle hooks that allow each module to execute certain logic before or after transactions or blocks.
Also, it defines the logic for the transaction assets of the module.</p>
</div>
<div class="paragraph">
<p>As third part, modules expose an interface.
This interface allows other components of the applications to interact with the module.
Reducers are actions that can only be invoked by other modules of the application.
Actions and Events are exposed to the plugins and to external services.
More information about the exposed interface can be found in the section about the <a href="communication-architecture.html" class="page">Communication Architecture</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">When to create a custom module</div>
<div class="paragraph">
<p>Modules enable to&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>define how data is stored on the blockchain</p>
</li>
<li>
<p>define logic which is executed per block</p>
</li>
<li>
<p>define logic which is executed per transaction</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, all of the logic implemented using a module/asset must be deterministic and executable within the block time.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="transaction-assets"><a class="anchor" href="#transaction-assets"></a>Transaction assets</h3>
<div class="paragraph">
<p>Transaction assets contain all logic related to transactions that belong to the module.
Formerly, this logic was implemented in a custom transaction.
The implementation of a custom transaction asset is similar to a custom transaction, but much more simple.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">When to create a custom asset</div>
<div class="paragraph">
<p>Create a custom asset for every transaction type that you want to use in the blockchain application.</p>
</div>
<div class="paragraph">
<p>Assets enable to&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>define a schema for data sent through transaction asset</p>
</li>
<li>
<p>validate the data</p>
</li>
<li>
<p>define logic which is executed per asset</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-create-a-custom-module-with-an-asset"><a class="anchor" href="#how-to-create-a-custom-module-with-an-asset"></a>How to create a custom module with an asset</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module and asset must extend the base module and base asset defined in the Lisk SDK.</p>
</div>
<div class="sect2">
<h3 id="the-life-cycle-of-a-block"><a class="anchor" href="#the-life-cycle-of-a-block"></a>The life cycle of a block</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Receive block</p>
</li>
<li>
<p>Apply fork choice rule</p>
</li>
<li>
<p>Validate block</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Validate transactions</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Validate transaction</p>
</li>
<li>
<p><strong>Validate transaction asset</strong></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Verify block header</p>
</li>
<li>
<p><strong>Before block apply</strong></p>
</li>
<li>
<p><strong>Apply block</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Apply transactions</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>beforeTransactionApply</strong></p>
</li>
<li>
<p><strong>Apply asset</strong></p>
</li>
<li>
<p><strong>afterTransactionApply</strong></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><strong>After block apply</strong></p>
</li>
<li>
<p>Save block and updated states</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <strong>bold</strong> steps are the steps exposed via the base module and base asset, see the <a href="../references/lisk-framework/index.html#the-basemodule" class="page">Lisk Framework reference</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="example-a-hello-module"><a class="anchor" href="#example-a-hello-module"></a>Example: A hello module</h3>
<div class="paragraph">
<p>A simple implementation of a custom module looks like this:</p>
</div>
<div class="listingblock">
<div class="title">hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseModule, codec } = require('lisk-sdk');
const { HelloAsset, HelloAssetID } = require('./hello_asset');
const {
    helloCounterSchema,
    helloAssetSchema,
    CHAIN_STATE_HELLO_COUNTER
} = require('./schemas');

class HelloModule extends BaseModule {
    name = 'hello'; <i class="conum" data-value="1"></i><b>(1)</b>
    id = 1024; <i class="conum" data-value="2"></i><b>(2)</b>
    accountSchema = { <i class="conum" data-value="3"></i><b>(3)</b>
        type: 'object',
        properties: {
            helloMessage: {
                fieldNumber: 1,
                dataType: 'string',
            },
        },
        default: {
            helloMessage: '',
        },
    };
    transactionAssets = [ new HelloAsset() ]; <i class="conum" data-value="4"></i><b>(4)</b>
    actions = { <i class="conum" data-value="5"></i><b>(5)</b>
        amountOfHellos: async () =&gt; {
            const res = await this._dataAccess.getChainState(CHAIN_STATE_HELLO_COUNTER);
            const count = codec.decode(
                helloCounterSchema,
                res
            );
            return count;
        },
    };
    events = ['newHello']; <i class="conum" data-value="6"></i><b>(6)</b>
    reducers = {}; <i class="conum" data-value="7"></i><b>(7)</b>
    async beforeTransactionApply({transaction, stateStore, reducerHandler}) { <i class="conum" data-value="8"></i><b>(8)</b>
        // Code in here is applied before each transaction is applied.
    };

    async afterTransactionApply({transaction, stateStore, reducerHandler}) { <i class="conum" data-value="9"></i><b>(9)</b>
      // Code in here is applied after each transaction is applied.
      if (transaction.moduleID === this.id &amp;&amp; transaction.assetID === HelloAssetID) {

        const helloAsset = codec.decode(
          helloAssetSchema,
          transaction.asset
        );

        this._channel.publish('hello:newHello', {
          sender: transaction._senderAddress.toString('hex'),
          hello: helloAsset.helloString
        });
      }
    };
    async afterGenesisBlockApply({genesisBlock, stateStore, reducerHandler}) { <i class="conum" data-value="10"></i><b>(10)</b>
      // Set the hello counter to zero after the genesis block is applied
      await stateStore.chain.set(
        CHAIN_STATE_HELLO_COUNTER,
        codec.encode(helloCounterSchema, { helloCounter: 0 })
      );
    };
    async beforeBlockApply(context) { <i class="conum" data-value="11"></i><b>(11)</b>
        // Code in here is applied before each block is applied.
    }
    async afterBlockApply(context) { <i class="conum" data-value="12"></i><b>(12)</b>
        // Code in here is applied after each block is applied.
    }
}

module.exports = { HelloModule };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>name</code>(required): will be used for a key of the account schema if defined.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>id</code>(required): will be used for a fieldNumber for the account schema, and as <code>moduleID</code> when sending a transaction.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>accountSchema</code>: defines the account schema for the module.
Defined properties will be added to every account under the <code>name</code> of the module.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>transactionAssets</code>: A list of all custom assets that belong to the module.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>actions</code>: A list of actions that can be invoked by plugins and external services.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>events</code>: A list of events that other plugins and external services can subscribe to.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>reducers</code>: A list of actions that can be invoked by other modules.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><code>beforeTransactionApply</code>: Code in here is applied before each transaction is applied.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><code>afterTransactionApply</code>: Code in here is applied after each transaction is applied.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td><code>afterGenesisBlockApply</code>: Code in here is applied after the genesis block is applied.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td><code>beforeBlockApply</code>: Code in here is applied before each block is applied.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td><code>afterBlockApply</code>: Code in here is applied after each block is applied.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="example-the-hello-asset"><a class="anchor" href="#example-the-hello-asset"></a>Example: The hello asset</h3>
<div class="paragraph">
<p>A simple implementation of a custom asset looks like this:</p>
</div>
<div class="listingblock">
<div class="title">hello_asset.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const {
    BaseAsset,
    codec,
} = require('lisk-sdk');
const {
    helloCounterSchema,
    CHAIN_STATE_HELLO_COUNTER
} = require('./schemas');

const HelloAssetID = 0;

class HelloAsset extends BaseAsset {
    name = 'helloAsset'; <i class="conum" data-value="1"></i><b>(1)</b>
    id = HelloAssetID; <i class="conum" data-value="2"></i><b>(2)</b>
    schema = { <i class="conum" data-value="3"></i><b>(3)</b>
        $id: '/hello/asset',
        type: 'object',
        required: ["helloString"],
        properties: {
            helloString: {
                dataType: 'string',
                fieldNumber: 1,
            },
        }
    };

    validate({asset}) { <i class="conum" data-value="4"></i><b>(4)</b>
        if (!asset.helloString || typeof asset.helloString !== 'string' || asset.helloString.length &gt; 64) {
          throw new Error(
                'Invalid "asset.hello" defined on transaction: A string value no longer than 64 characters is expected'
            );
        }
    };

    async apply({ asset, stateStore, reducerHandler, transaction }) { <i class="conum" data-value="5"></i><b>(5)</b>
        const senderAddress = transaction.senderAddress;
        const senderAccount = await stateStore.account.get(senderAddress);

        senderAccount.hello.helloMessage = asset.helloString;
        stateStore.account.set(senderAccount.address, senderAccount);

        let counterBuffer = await stateStore.chain.get(
            CHAIN_STATE_HELLO_COUNTER
        );

        let counter = codec.decode(
            helloCounterSchema,
            counterBuffer
        );

        counter.helloCounter++;

        await stateStore.chain.set(
            CHAIN_STATE_HELLO_COUNTER,
            codec.encode(helloCounterSchema, counter)
        );
    }
}

module.exports = { HelloAsset, HelloAssetID };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>name</code>(required): used for UI purpose.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>id</code>(required): used as <code>AssetID</code> when sending a transaction.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>schema</code>(required): defines the <code>asset</code> schema for the transaction.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>validate</code> is used to validate the asset data before it is applied.
Throws an error, in case the validation fails.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>apply</code>(required): defines a state change induced by this asset.
In <code>HelloAsset</code>, it adds the hello string that was sent in the transaction to the senders account and increments the <code>helloCounter</code>.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sdk-default-modules"><a class="anchor" href="#sdk-default-modules"></a>SDK default modules</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../dpos-module.html" class="page">The DPoS module</a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The DPoS module is responsible for handling all DPoS related logics.
Specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Snapshotting vote weights</p>
</li>
<li>
<p>Calculating productivity</p>
</li>
<li>
<p>Handling registerDelegate, voteDelegate, unlockToken and reportDelegateMisbehavior transaction assets</p>
</li>
<li>
<p>Setting the next delegates set</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../keys-module.html" class="page">The keys module</a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Keys module handles all logic related to the signatures.</p>
</div>
<div class="paragraph">
<p>It should verify the signatures based on the multi-signature rules including non-multi-signature accounts.
It also handles the registration of multi-signature accounts.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../sequence-module.html" class="page">The sequence module</a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Sequence module handles all logic related to the nonce.</p>
</div>
<div class="paragraph">
<p>It should verify the nonce for all transactions and increment if valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../token-module.html" class="page">The token module</a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Token module handles all logic related to balance.
Specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validating and subtracting fees for all transactions</p>
</li>
<li>
<p>Checking the minimum remaining balance requirement</p>
</li>
<li>
<p>Giving block rewards to the block generator</p>
</li>
<li>
<p>Transferring account balances</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
    <div class="bottom-links">
    <div>
      <a class="bottom-link" href="/documentation/lisk-sdk/architecture/index.html"><i class="icofont-double-left icofont-3x"></i>Architectural overview
    </a>
    </div><div>
      <a class="bottom-link" href="/documentation/lisk-sdk/architecture/off-chain-architecture.html">Off-chain architecture<i class="icofont-double-right icofont-3x"></i>
      </a>
    </div>
  </div>






<!--{]> pagination}}-->
</article>
<aside class="article-aside hidden" role="navigation">
</aside>


<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
  </div>
</div>
<footer class="footer">
    <div class="footer__container">
        <div class="footer__copyright">
            <div class="institutional-links-2">
                <span class="institutional-links-2__item">© 2021 Lisk Foundation</span>
              <ul class="footer-links">
                <li><a class="institutional-links-2__item" href="https://lisk.io/terms-conditions" class="institutional-links-2-item">Terms & Conditions</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/privacy" class="institutional-links-2-item">Privacy Policy</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/contact" class="institutional-links-2-item">Contact</a></li>
              </ul>
            </div>
            <p class="footer__copyright-text">Lisk is a foundation registered in Zug, Switzerland
            </p>
        </div>
        <div class="footer__logo-container">
            <img src="../../_/img/lisk-logo-light.svg" class="footer__lisk-logo"/>
        </div>
        <div class="community-section">
            <p class="community-section__text">Follow Lisk on: </p>
            <div class="community-section__icons">
                <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer__icon icon-github"></a>
                <a href="https://twitter.com/LiskHQ" title="Twitter" target="_blank" class="footer__icon icon-twitter"></a>
                <a href="https://lisk.chat" title="Discord" target="_blank" class="footer__icon icon-discord"></a>
                <a href="https://www.reddit.com/r/Lisk/" title="Reddit" target="_blank" class="footer__icon icon-reddit"></a>
                <a href="https://www.facebook.com/LiskHQ" title="Facebook" target="_blank" class="footer__icon icon-facebook"></a>
            </div>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/top-versions.js"></script>
<script async src="../../_/js/vendor/custom.js"></script>
  <script src="../../_/js/vendor/docsearch.min.js"></script>
  <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
  <script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>

  </body>
</html>
