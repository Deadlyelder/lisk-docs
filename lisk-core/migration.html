<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lisk Core Migration :: Docs</title>
    <link rel="canonical" href="https://lisk.io/documentation/lisk-core/migration.html">
    <meta name="description" content="The Lisk Core Migration page describes how to migrate the node, if a new update introduces a hard fork in the network. In addition, it also provides background information about all actions occurring during a migration.">
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/site-extra.css">
      <link rel="stylesheet" href="../_/css/vendor/docsearch.min.css">
      <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    <!--
    <link href="https://unpkg.com/primer/build/build.css" rel="stylesheet">
-->
<link rel="icon" href="/sites/default/files/favicons/favicon-32x32.png" type="image/png">
  </head>
  <body class="article">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NKNKGHL');</script>
<!-- End Google Tag Manager -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NKNKGHL"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<header class="header">
  <nav class="navbar">
      <div class="navbar-content">
        <div class="navbar-brand">
          <a href="https://lisk.io" class="lisk-logo"></a>
            <span  class="nav-brand__name-area">
              <strong class="nav-brand__name-area__title">Core Docs</strong>
              </span>
          <button class="navbar-burger" data-target="topbar-nav">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Docs</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-sdk/">Lisk SDK</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/">Lisk Core</a>
              </div>
            </div>
              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="#">Setup</a>
                <div class="navbar-dropdown">
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/setup/binary.html">Binary (default)</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/setup/commander.html">Commander</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/setup/docker.html">Docker</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/setup/source.html">Source</a>
                </div>
              </div>
              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="#">Update</a>
                <div class="navbar-dropdown">
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/update/binary.html">Binary (default)</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/update/commander.html">Commander</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/update/docker.html">Docker</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/update/source.html">Source</a>
                </div>
              </div>
              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="#">Reference</a>
                <div class="navbar-dropdown">
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/reference/config.html">Configuration</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/reference/api.html">Testnet API</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/reference/api-mainnet.html">Mainnet API</a>
                  <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/3.0.0/reference/api.html">Betanet API</a>
                </div>
              </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Resources</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href="https://lisk.io/roadmap"><i class="icofont-map-pins"></i>Roadmap</a>
                <a class="navbar-item" href="https://lisk.io/research"><i class="icofont-laboratory"></i>Research</a>
                <a class="navbar-item" href="https://lisk.io/blog"><i class="icofont-paper"></i>Blog</a>
                <a class="navbar-item" href="https://lisk.io/apps"><i class="icofont-dashboard-web"></i>Blockchain Apps List</a>
                <a class="navbar-item" href="https://lisk.io/builders-program"><i class="icofont-worker"></i>Lisk Builders Program</a>
                <a class="navbar-item" href="https://dev.lisk.io/"><i class="icofont-penguin-linux"></i>Dev Forum</a>
                <a class="navbar-item" href="https://lisk.io/community"><i class="icofont-people"></i>Community</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Explore</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" target="_blank" href="#"><strong>Github</strong></a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-sdk">Lisk SDK Github<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-core">Lisk Core Github<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-sdk-examples">Example Applications Github<i class="icofont-external-link"></i></a>
                <hr class="navbar-divider">
                <a class="navbar-item" target="_blank" href="#"><strong>Blockchain Explorer</strong></a>
                <a class="navbar-item" target="_blank" href="https://testnet-explorer.lisk.io/">Testnet Explorer<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://explorer.lisk.io/">Mainnet Explorer<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://betanet-explorer.lisk.io/">Betanet Explorer<i class="icofont-external-link"></i></a>
              </div>
            </div>
          </div>
            <div class="navbar-menu">
              <div class="navbar-item hide-for-print">
                <input id="search-input" type="text" placeholder="Search docs">
              </div>
            </div>
        </div>
      </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="lisk-core" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Lisk Core</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interact-with-network.html">Interact with the network</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Setup</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup/binary.html">Binary installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup/commander.html">Commander installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup/docker.html">Docker installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup/source.html">Source installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Management</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/binary.html">Binary commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/commander.html">Commander commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/docker.html">Docker commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/source.html">Source commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/configuration.html">Config file handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/api-access.html">Control API access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/forging.html">Enable forging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/logs.html">Activate logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="management/ssl.html">Enable SSL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Update</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="update/binary.html">Binary update</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="update/commander.html">Commander update</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="update/docker.html">Docker update</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="update/source.html">Source update</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="migration.html">Migration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Reference</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference/api.html">API (Testnet)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference/api-mainnet.html">API (Mainnet)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference/config.html">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Core</span>
    <span class="version">2.1.5 (latest)</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Lisk Core</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2.1.5 (latest)</a>
        </li>
        <li class="version">
          <a href="3.0.0/index.html">3.0.0-beta.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk SDK</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-sdk/index.html">3.0.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-sdk/2.3.7/index.html">2.3.7</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../lisk-sdk/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Lisk Core</a></li>
    <li><a href="migration.html">Migration</a></li>
  </ul>
</nav>
<button class="toc-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.1.5 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="migration.html">2.1.5 (latest)</a>
    <a class="version" href="3.0.0/migration.html">3.0.0-beta.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-core-2.1.5/modules/ROOT/pages/migration.adoc">Edit this Page</a></div>
  </div>
<article class="doc">
<h1 class="page">Lisk Core Migration</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Migration of a Lisk Node is only necessary during a hard fork.
For normal software updates that do not invoke a hard fork, please perform a normal upgrade, see <a href="index.html#upgrade_vs_migration" class="page">Upgrade vs Migration</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_happens_during_migration"><a class="anchor" href="#_what_happens_during_migration"></a>What happens during migration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The migration is a special case of upgrading your Lisk Core node.
A migration is required if the new version of the software is not compatible with older Lisk Core versions.</p>
</div>
<div class="paragraph">
<p>As a consequence, the majority of the network needs to perform this software update simultaneously to stabilize the forked chain and as a result, make it grow faster as the outdated version of the chain.</p>
</div>
<div class="paragraph">
<p>To achieve this, a height is picked to proceed with a simultaneous global upgrade.
When the blockheight of the network reaches the predefined height, it will invoke the update on all nodes in the network at the same time.
This way the probabilities of creating forks are lower.</p>
</div>
<div class="paragraph">
<p>Besides the normal update script, the <strong>Lisk Bridge</strong> script might include additional scripts.</p>
</div>
<div class="paragraph">
<p>For example, if the new update includes changes in the structure of the configuration file, the script would try to reorganize your existing config to the new structure and then run the normal update script afterwards.
To perform the migration manually instead of using the automated script, a detailed explanation of <a href="#migrate_manually">how to migrate manually</a> is covered later in this section.</p>
</div>
<div class="paragraph">
<p>The following section describes how to use the automated migration script for binary distributions of Lisk Core, in order to ensure the migration is performed as seamlessly as possible, and also covers the manual migration process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automated_migration"><a class="anchor" href="#_automated_migration"></a>Automated Migration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prepare_your_workspace"><a class="anchor" href="#_prepare_your_workspace"></a>Prepare your workspace</h3>
<div class="paragraph">
<p>At this point it is assumed that Lisk Core has now already been installed and the user is familiar with the application.
Nevertheless, it is recommended to double check the 2 points listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Revisit the <a href="index.html#distributions" class="page">setup</a> steps before continuing.</p>
</li>
<li>
<p>Verify that the following ports are open depending on the network in use:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Network</th>
<th class="tableblock halign-left valign-top">HTTP</th>
<th class="tableblock halign-left valign-top">WebSocket</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mainnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8001</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7001</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Make a backup of <code>config.json</code>.
While this process does make a backup automatically in a <code>backup/</code> directory, it is recommended to additionally perform another back up just to be on the safe side.
At the end of this tutorial, some advanced cases can be seen to further guide the user.</p>
</li>
<li>
<p>The next section introduces a tool specifically designed in order to perform a gap-less migration.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_lisk_bridge_automated_lisk_core_migration"><a class="anchor" href="#_lisk_bridge_automated_lisk_core_migration"></a>Lisk Bridge: Automated Lisk Core Migration</h3>
<div class="paragraph">
<p>This migration tool is called <strong>Lisk Bridge</strong>, and can be found here: <a href="https://downloads.lisk.io/lisk/">downloads.lisk.io</a>.
The direct download links depending on the network your node is connected to, are displayed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://downloads.lisk.io/lisk/test/lisk_bridge.sh">Lisk Bridge for Testnet</a></p>
</li>
<li>
<p><a href="https://downloads.lisk.io/lisk/main/lisk_bridge.sh">Lisk Bridge for Mainnet</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The wrapper script that invokes <code>installLisk.sh upgrade</code> at a specific block height is intended for users using the <a href="setup/binary.html" class="page">Binary installation</a>.</p>
</div>
<div class="paragraph">
<p>To upgrade your node on a specific network height, please download <code>lisk_bridge.sh</code> to the same directory where <code>installLisk.sh</code> would be downloaded and run from.
In other words, it should be 1 directory above where the lisk application is stored.
For example, in the case whereby <code>Lisk Core 0.9.16</code> is currently running as a user called <code>lisk</code>, <code>Lisk Core 0.9.16</code> is most likely installed in <code>/home/lisk/lisk-main</code>, and <code>installLisk.sh</code> is stored in <code>/home/lisk</code>, the lisk user’s home directory.
As the lisk user it should then be possible to execute the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">su - lisk <i class="conum" data-value="1"></i><b>(1)</b>
rm -f lisk_bridge.sh <i class="conum" data-value="2"></i><b>(2)</b>
wget https://downloads.lisk.io/lisk/&lt;network&gt;/lisk_bridge.sh <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>change to lisk user.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>remove old versions of lisk_bridge.sh.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>&lt;network&gt;</code> can either be <code>main</code> for Mainnet or <code>test</code> for Testnet.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then execute the script with the desired parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">bash lisk_bridge.sh -n &lt;network&gt; -h &lt;blockheight&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;network&gt;</code> can either be <code>main</code> for Mainnet or <code>test</code> for Testnet.
The <code>&lt;blockheight&gt;</code> is the blockheight announced previously when the hard fork is going to happen.</p>
</div>
<div class="paragraph">
<p>The bridge script will run and wait for the specified height of the network.
Upon reaching the specified height it will invoke <code>installLisk.sh</code> in order to update the code, migrate the database to the new model, and update the config files.</p>
</div>
<div class="paragraph">
<p>If a fully automated migration is being performed it will be possible to run <code>lisk_bridge.sh</code> inside of tmux, screen, byobu, or another terminal multiplexer and detach your session days ahead of time if required, however it is recommended to minimize this lead time when exporting the <code>LISK_MASTER_PASSWORD</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Important note for delegates:</strong> After an automated upgrade is performed, it will still be necessary to manually enable forging again, as described in the <a href="management/configuration.html#forging_enable_disable" class="page">configuration section</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A short video clip showing the expected output from the script execution can be viewed below, which will assist the user in ensuring the migration was completed successfully:</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="66%" height="100%" src="https://www.youtube.com/embed/Zy9gyH-toBM?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lisk_bridge_command_reference"><a class="anchor" href="#_lisk_bridge_command_reference"></a>Lisk Bridge Command Reference</h3>
<div class="paragraph">
<p>The <code>lisk_bridge.sh</code> usage help menu can be seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Usage: bash lisk_bridge.sh &lt;-h &lt;BLOCKHEIGHT&gt;&gt; [-s &lt;DIRECTORY&gt;] [-n &lt;NETWORK&gt;]
-h &lt;BLOCKHEIGHT&gt; -- specify blockheight at which bridging will be initiated
-f &lt;TARBALL&gt;     -- specify path to local tarball containing the target release
-s &lt;DIRECTORY&gt;   -- Lisk home directory
-n &lt;NETWORK&gt;     -- choose main or test

Example: bash lisk_bridge.sh -h 50000000 -n test -s /home/lisk/lisk-test
Set the LISK_MASTER_PASSWORD environment variable if a secret migration in non-interactive mode is required.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_what_if_i_miss_the_block_height_or_if_lisk_bridge_script_fails"><a class="anchor" href="#_what_if_i_miss_the_block_height_or_if_lisk_bridge_script_fails"></a>What if I miss the block height or if Lisk Bridge script fails?</h3>
<div class="paragraph">
<p>Counting from the migration height, there is 2 full forging rounds time to upgrade your node manually by following the steps described in <a href="#migrate_manually">Migrate manually</a>.
If 2 full forging rounds have already passed since migration, your Node will probably be on a fork after the upgrade.
In order to resolve this, rebuild your version of the blockchain <a href="index.html#snapshots" class="page">from snaphot</a> or <a href="management/binary.html#rebuild_from_genesis" class="page">from genesis block</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_migration_notes_lisk_core_0_9_to_1_0"><a class="anchor" href="#_migration_notes_lisk_core_0_9_to_1_0"></a>Migration Notes Lisk Core 0.9 to 1.0</h3>
<div class="sect3">
<h4 id="_neccessary_utility_scripts"><a class="anchor" href="#_neccessary_utility_scripts"></a>Neccessary utility scripts</h4>
<div class="paragraph">
<p>The following utility scripts are run by <code>lisk_bridge.sh</code> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#update_config">update_config.js</a>: migrates config to new structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>During the execution of <code>lisk_bridge.sh</code>, a password prompt will occur in the case where it finds a passphrase.
It will encrypt and migrate that passphrase to the new format.
In order to to avoid this prompt and perform a fully automated migration, add the next environment variable to your system as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export LISK_MASTER_PASSWORD=XXXXXXXX</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="migrate_manually"><a class="anchor" href="#migrate_manually"></a>Migrate manually</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To migrate a Lisk node manually, perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Backup your data.</p>
</li>
<li>
<p>Run the necessary <a href="#utility_scripts">utility scripts</a>.
These scripts prepare the Lisk node for the migration and are required before the upgrade script can run successfully.
The utility scripts that need to be run can vary depending on the migration.</p>
</li>
<li>
<p>Follow the default <a href="index.html#upgrade_vs_migration" class="page">upgrade process</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="utility_scripts"><a class="anchor" href="#utility_scripts"></a>Utility Scripts</h3>
<div class="paragraph">
<p>It is not necessary run these scripts if <code>lisk_bridge.sh</code> has previously been executed as it will have already been performed automatically.</p>
</div>
<div class="paragraph">
<p>There are 2 useful command line scripts described below that will further assist the user.</p>
</div>
<div class="paragraph">
<p>All scripts are located under the <code>./scripts/</code> directory and can be executed directly by <code>node scripts/&lt;file_name&gt;</code>.</p>
</div>
<div class="sect3">
<h4 id="_generate_config"><a class="anchor" href="#_generate_config"></a>Generate Config</h4>
<div class="paragraph">
<p>This script will assist the user in generating a unified version of the configuration file for any network, and the usage of this script can be seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Usage: node scripts/generate_config.js [options]

Options:

-h, --help               output usage information
-V, --version            output the version number
-c, --config [config]    custom config file
-n, --network [network]  specify the network or use LISK_NETWORK</code></pre>
</div>
</div>
<div class="paragraph">
<p>The argument <code>network</code> is required, and this can be either the <code>devnet</code>, <code>testnet</code>, <code>mainnet</code> or any other network folder available under <code>./config</code> directory.</p>
</div>
</div>
<div class="sect3">
<h4 id="update_config"><a class="anchor" href="#update_config"></a>Update Config</h4>
<div class="paragraph">
<p>This script keeps track of all changes introduced in Lisk over time in different versions.
In the case whereby one config file exists, (regardless of which version), it is possible to make this compatible with other versions of Lisk by running the following script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Usage: node scripts/update_config.js [options] &lt;input_file&gt; &lt;from_version&gt; [to_version]

Options:

-h, --help               output usage information
-V, --version            output the version number
-n, --network [network]  specify the network or use LISK_NETWORK
-o, --output [output]    output file path</code></pre>
</div>
</div>
<div class="paragraph">
<p>As can be seen from the usage guide, <code>input_file</code> and <code>from_version</code> are required.
If <code>to_version</code> is omitted, then argument changes in config.json will be applied up to the latest version of Lisk Core.
If the <code>--output</code> path is not specified, the final config.json will be printed to stdout.
Finally, if the <code>--network</code> argument is not specified, it will have to be loaded from <code>LISK_NETWORK</code> env variable.</p>
</div>
</div>
</div>
</div>
</div>
    <div class="bottom-links">
    <div>
      <a class="bottom-link" href="/documentation/lisk-core/management/configuration.html"><i class="icofont-double-left icofont-3x"></i>Configuration
      </a>
    </div><div>
      <a class="bottom-link" href="/documentation/lisk-core/monitoring.html">Monitoring<i class="icofont-double-right icofont-3x"></i>
      </a>
    </div></div>






</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">On this page:</h3>
    <div id="article-toc"></div>
</aside>


</main>
</div>
<footer class="footer">
    <div class="footer__container">
        <div class="footer__copyright">
            <div class="institutional-links-2">
                <span class="institutional-links-2__item">© 2020 Lisk Foundation</span>
                <a class="institutional-links-2__item" href="https://lisk.io/terms-conditions" class="institutional-links-2-item">Terms & Conditions</a>
                <a class="institutional-links-2__item" href="https://lisk.io/privacy" class="institutional-links-2-item">Privacy Policy</a>
            </div>
            <p class="footer__copyright-text">Lisk is a foundation registered in Zug, Zwitserland
            </p>
        </div>
        <div class="footer__logo-container">
            <img src="../_/img/lisk-logo-light.svg" class="footer__lisk-logo"/>
        </div>
        <div class="community-section">
            <p class="community-section__text">Follow Lisk on: </p>
            <div class="community-section__icons">
                <a href="https://github.com/LiskHQ" target="_blank" class="footer__icon icon-github"></a>
                <a href="https://www.youtube.com/channel/UCuqpGfg_bOQ8Ja4pj811PWg/featured" target="_blank" class="footer__icon icon-youtube"></a>
                <a href="https://www.reddit.com/r/Lisk/" target="_blank" class="footer__icon icon-reddit"></a>
                <a href="https://www.linkedin.com/company/lisk/" target="_blank" class="footer__icon icon-linkedin"></a>
                <a href="https://twitter.com/LiskHQ" target="_blank" class="footer__icon icon-twitter"></a>
                <a href="https://www.facebook.com/LiskHQ" target="_blank" class="footer__icon icon-facebook"></a>
            </div>
        </div>
    </div>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/tabs-block-behaviour.js"></script>
<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>
  <script src="../_/js/vendor/docsearch.min.js"></script>
  <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
  <script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>

  </body>
</html>
