= Introduction
Mona Bärenfänger <mona@lightcurve.io>
:description: Describes the general purpose, architecture and usage of Lisk Service.
:toc:
:imagesdir: ../assets/images
:page-no-previous: true
:page-next: /lisk-service/setup/index.html
:page-next-title: Setup
:v_sdk: 3.0.2

:url_electrumx_docs: https://electrumx.readthedocs.io/en/latest/
:url_github_lisk_explorer: https://github.com/LiskHQ/lisk-explorer

:url_api_http:  references/api.adoc
:url_config:  references/api.adoc
:url_setup_docker:  references/api.adoc
:url_sdk_api: {v_sdk}@lisk-sdk::reference/api.adoc

Lisk Service is a web application that allows interaction with various blockchain networks based on Lisk and Bitcoin protocols.
Its main principle is to provide services that are complementary to the main blockchain product Lisk Core.

The main focus of this project is to provide data to the UI clients such as Lisk Desktop and Lisk Mobile.
Lisk Service makes it possible to access all live blockchain data in a similar way to the regular Lisk Core API, but also provides users with much more details, such as geolocation and various statistics about network usage.

The project implementation is based on microservices.
The technical stack is designed to deliver several microservices and each of them is meant to provide one particular functionality such as Lisk blockchain support.
The data is served in JSON format and exposed by a public RESTful API.

== Architecture

image::architecture.png[Architecture]

=== Components

[cols="2,1,4", options="header"]
.Lisk Service Components
|===
|Component |Default Port |Description

|Gateway
|`9901`
|The Gateway component provides the xref:{url_api_http}[API], which all users of Lisk Service can access and use.
Its main purpose is to proxy API requests from users to other components provided by Lisk Service.
It also maintains backwards compatibility when its public API is changed or replaced by a new version.
This provides users with a central point of data access that never breaks existing application compatibility.

|Legacy
|`9902`
|The Legacy component is based on the {url_github_lisk_explorer}[Lisk Explorer^] backend code.
The Legacy component is responsible for providing compatibility with products developed with the Explorer 1.x/2.x API.

|Core
|`NATS`
|The REST client component acts as a bridge between the Lisk SDK and the Lisk Service API.
Its main purpose is to provide enriched data from the xref:{url_sdk_api}[Lisk SDK API].
This component is aimed at providing high availability, efficient and reliable access to the Lisk SDK API.

|Template
|`NATS`
|The Template component is an abstract component that the all Lisk Service components inherit from.
It allows all components to share a similar interface and design pattern.
Its purpose is to reduce code duplication and increase consistency between each component, simplifying code maintenance and testing.

|Bitcoin
|9905
|The Bitcoin Component communicates with {url_electrumx_docs}[ElectrumX^] to retrieve data from the Bitcoin network.
The Bitcoin component provides bitcoin data from Electrum server and acts as a bridge for the Lisk Service API.

|Storage
|9906
|The Storage Component is designed for storing retrieving data.
Data persistence is guaranteed by the LevelDB database engine.

|Market
|`NATS`
|The Market Component takes care about data from external APIs such as blog platforms, and cryptocurrency exchanges.
It supports a persistent storage that allows to retrieve data from any time period, regardless from its source's availability.
|===

== Usage

=== Installation

To install Lisk Service with all its dependencies, run:

[source,bash]
----
npm run docker:build
----

For more information about how to install Lisk Service and its' prerequisites, check out the xref:{url_setup_docker}[Setup guide].

[[start]]
=== Start Lisk Service

[source,bash]
----
cd lisk-service/docker/
make -f Makefile.mainnet up
----

=== Stop Lisk Service

[source,bash]
----
make -f Makefile.mainnet down
make -f Makefile.mainnet mrproper
----

=== Retrieve data

Once Lisk Service is xref:{url_setup_docker}[set up], xref:{url_config}[configured] and <<start, running>>, it is possible to retrieve data from the xref:{url_api_http}[API].

==== Example request

[source,bash]
----
curl -X GET "http://localhost:9901/api/v1/delegates/active?limit=101&offset=0" -H  "accept: application/json"
----

==== Example response

.Array of active delegates
[source,json]
----
{
  "data": [
    {
      "address": "4935562234363081651L",
      "approval": "35.77",
      "missedBlocks": 157,
      "producedBlocks": 55222,
      "productivity": "99.72",
      "publicKey": "6122ac1fd71b437014ddbc4ec01e07879f5af1853536efaa0233bc12907c684b",
      "secondPublicKey": "6122ac1fd71b437014ddbc4ec01e07879f5af1853536efaa0233bc12907c684b",
      "rank": 93,
      "rewards": "109000000000",
      "username": "genesis_84",
      "vote": "4630668157412954"
    }
  ],
  "meta": {
    "count": 100,
    "offset": 25,
    "total": 43749
  },
  "links": {}
}
----
