== Transactions

In Lisk, the state of the blockchain is updated by transactions included in a link:3-blocks.adoc[block]. Every account can issue a transaction, with the corresponding signature and data. There is a set of different transaction types and each of these types define a specific logic for modifying accounts depending on the transaction data. In the table below there is a summary of these transaction types and the purpose each of them serve. 

|===
|*Transaction Type*|*Purpose*

|*Balance Transfer*|Transmit funds to another Lisk account
|*Delegate Registration*|Register a delegate for the account
|*Vote*|Submit or remove vote(s) for delegates
|*Unlock Vote*|Unlock locked tokens
|*Multisignature*|Register a multisignature in the account
|*PoM*|Submit a Proof-of-misbehavior of a delegate
|*Reclaim*|Access funds from the legacy address
|===

=== Transaction Properties, Transaction ID and Minimum Balance

image::../assets/images/InfographicsV1/Infographic7.png[TxDiagram]

Every transaction object in the Lisk protocol, regardless of the type, has a common set of properties which are:

==== `type`

An integer identifying the type of the transaction.

==== `nonce`

An integer that can be used only once by the `senderPublicKey`. If due to  network congestion, a transaction was not included in a block because its fee was too low, a user can broadcast a new transaction using the same `nonce` value but with a higher fee. Once one of the two transactions is included in the Lisk blockchain, the other one becomes invalid as the `nonce` has been already used.

==== `fee`

Fee in Beddows to be spent by the transaction. This fee has to be equal or greater than a minimum value for the transaction to be valid. The minimum value is calculated as the size of the transaction object multiplied by a constant, `minFeePerByte`, given by the protocol. The value of `minFeePerByte` is 10^-5^ LSK/byte (or 1000 Beddows/byte). Note that for *Delegate Registration* transactions there is an extra summand of 10 LSK added to the minimum fee to account for the name space used by this type of transaction. 

For example, for a <<Balance Transfer>> transaction with a size of 133 bytes, the minimum fee is 10^-5^ LSK/byte × 133 bytes = 0.00133 LSK. In the case of <<Delegate Registration>> transaction with a size of 124 bytes, then the__ __minimum fee of the transaction is 10 LSK + 10^-5^ LSK/byte × 124 bytes = 10.00124 LSK.

This required minimum fee paid by every transaction is burned, i.e. it is not assigned to any account balance. The remaining fee on top of it is assigned to the delegate forging the block in which the transaction is included. This implies that under normal circumstances delegates give priority to transactions with higher remaining fee.

==== `senderPublicKey`

The public key of the account issuing the transaction. Note that, this public key does not necessarily sign the transaction. For simplicity, the account issuing the transaction is called sender account in the rest of document.

==== `asset` 

This property contains the data logic specific to the type of the transaction. For each `type` value, there exist a unique `asset` property. The next section describes the `asset` property of the different transaction types.

==== `signatures`

An array with the signatures of the transaction. If the account associated to `senderPublicKey` does not have the link:1-accounts.adoc#keys[`keys` property], the object containing the five properties introduced above has to be signed by the private key corresponding to the `senderPublicKey`. Otherwise, the signing process has to be repeated for each of the private keys associated with the applicable public keys specified in  the `keys` property of the account. In the link:6-appendix.adoc#signature-scheme[Appendix] section a detailed of the signing process is given.

==== ID

In Lisk, every transaction is associated with a transaction ID, which uniquely identifies a transaction in the blockchain. The transaction ID is the SHA-256 hash of the serialized  transaction.  +
Once the transaction has all the required signatures and ID, it is ready to be broadcast to the network so that it can be included into the link:6-network.adoc#transaction-pool[transaction pool] and eventually in a link:3-blocks.adoc[block]. 

==== Minimum Balance

A <<Balance Transfer>> transaction must make the balance of the receiving account equal to or greater than 0.05 LSK tokens. Moreover, any transaction sent from an account is only valid if the resulting balance of the sender account is at least 0.05 LSK. This constraint exists to account for the cost of creating and storing accounts in Lisk.

=== Transaction Types

The 7 transactions types available in the Lisk protocol are listed in the table above. Each of them induces a concrete operation on the blockchain state and is defined by a unique schema and transaction logic. This type-specific data is given in the `asset` property mentioned before. The key points and useful information for each of these transaction types are:

==== Balance Transfer 

This transaction type transfers the amount of Beddows specified in `amount` property from the link:1-account.adoc[account] corresponding to the `senderPublicKey`, i.e. the sender account, to the account specified in `recipientId`. This transaction allows to send a message in the optional property `data`. 

==== Delegate Registration 

This transaction registers the sender account as a link:4-consensus-algorithm.adoc#delegates-voting-and-delegate-weight[delegate] with the name given in `username`.

==== Vote

This transaction submits the votes specified in `votes` from the sender account. This is done by specifying the Lisk link:1-accounts.adoc#address[address] of the voted delegate in `delegateAddress` together with the amount of support (in Beddows) given to this delegate in `amount`. The quantity given in `amount` is subsequently [#index-locked-2]#*locked*# and cannot be used for other transactions. If the amount is negative, it implies that the specified amount of votes are removed from the delegate. The maximum number of votes that can be cast in a single transaction is 20 and `amount` has to be a multiple of 10 LSK.

==== Unlock Vote

This transaction [#index-unlocked-2]#*unlocks*# the LSK tokens specified in `amount` that were previously unvoted for the delegate in `delegateAddress` by vote transaction at the height given in the property `unvoteHeight`. This transaction is only valid if it is issued after the unlocking period has been completed since `unvoteHeight`. For a regular vote the unlocking period is 2000 blocks (around 5 hours). For self-votes, i.e. if the `delegateAddress` property of the transaction is equal to the account link:1-accounts.adoc#address[address], this period is 260,000 blocks (around 30 days).

==== Multisignature 

This transaction registers the sender account as a multisignature account. The set of [#index-mandatory-2]#*mandatory*# keys needs to be specified in `mandatoryKeys` whereas the set of [#index-optional-2]#*optional*# keys have to be specified in `optionalKeys`. The total number of needed keys for every future outgoing transaction from the account is given in `numberOfSignatures`. Once this transaction is included in a block, every transaction from this account has to be signed by the applicable set of signatures.

==== PoM 

This transaction contains the information necessary to prove that a delegate who signed the block headers given in `header1` and `header2` has violated the link:4-consensus-algorithm.adoc#lisk-bft[Lisk-BFT protocol]. The link:4-consensus-algorithm.adoc#punishment-of-lisk-bft-protocol-violation[Punishment of Lisk-BFT Protocol Violations] section of Consensus gives the details of the implications of this transaction type.

==== Reclaim

This transactions allows to access the balance given in `amount` stored in a legacy address associated with the account of the `senderPublicKey`.

image::../assets/images/InfographicsV1/Infographic8.png[TxAssetDiagram]


